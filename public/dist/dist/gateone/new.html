<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>

    <link rel="stylesheet" href="static/style.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="static/highlight_js.min.css">

    <script src="static/jquery.min.js" type="text/javascript"></script>
    <script src="static/jquery.anchor.js" type="text/javascript"></script>
    <script src="static/jquery.fancybox-1.2.6.pack.js" type="text/javascript"></script>
    <script src="static/highlight.min.js"></script>
    <style>
        html,
        body {
            height: 100%;
            width: 100%;
        }
    </style>
</head>

<body>

    <script type="text/javascript">
        $(document).ready(function(){
            // var ip = '{{ host_ip }}';
            // var user = '{{ host_user }}';
            // var port = {{ host_port }};
            var ssh_url = 'ssh://zw@localhost/';
            var request = $.ajax({
                url:'/api/get_auth_obj/',   // api认证方式， 
                type:"GET",
                dataType:"json"
            });

            request.done(function(auth_info){
                console.log(auth_info.auth);
                var auth_message = auth_info.auth;
                var auth_url = auth_info.url;
                GateOne.init({
                    auth: auth_message,
                    url:auth_url,
                    theme:'solarized',
                    goDiv:'#gateone',
                    disableTermTransitions:'true',
                    autoConnectURL:ssh_url
                });

            });
            GateOne.Base.superSandbox("GateOne.SomePlugin", ["GateOne", "GateOne.Net",  "GateOne.Terminal.Input", "GateOne.Terminal"], function(window, undefined) {

                var location =  ip;
                GateOne.prefs.autoConnectURL=ssh_url;
                GateOne.prefs.fontSize="100%";
                GateOne.prefs.scrollback = 10000;  // scrollback buffer up to 10,000 lines
                GateOne.Terminal.loadFont("Source Code Pro", "150%");
                GateOne.locations; // Holds the state of all current known/open locations#}
                GateOne.Net.setLocation(location); 

            });


        }); 
    </script>


</body>

</html>